## ---------------------------------
## -- Standard Autoconf variables --
## ---------------------------------

SHELL = /bin/bash

prefix = /usr/local
exec_prefix = ${prefix}

bindir = ${exec_prefix}/bin
# sbindir = ${exec_prefix}/sbin
# libexecdir = ${exec_prefix}/libexec
# datarootdir = ${prefix}/share
# datadir = ${datarootdir}
# sysconfdir = ${prefix}/etc
# sharedstatedir = ${prefix}/com
# localstatedir = ${prefix}/var
# includedir = ${prefix}/include
# oldincludedir = /usr/include
# docdir = ${datarootdir}/doc/${PACKAGE_TARNAME}
# infodir = ${datarootdir}/info
# htmldir = ${docdir}
# dvidir = ${docdir}
# pdfdir = ${docdir}
# psdir = ${docdir}
libdir = ${exec_prefix}/lib
# lispdir = @lispdir@
# localedir = ${datarootdir}/locale


host = x86_64-unknown-linux
host_alias = 
build = x86_64-unknown-linux
build_alias = 
target = x86_64-unknown-linux
target_alias = 

srcdir = .
abs_srcdir = /home/kfp/Development/fricas/src/input
top_srcdir = ../..
abs_top_srcdir = /home/kfp/Development/fricas

# Notice that there is a bug in Autoconf 2.59 whereby the variable
# top_builddir is not defined.  So avoid to use it directly.  Use
# abs_top_builddir.
builddir = .
abs_builddir = /home/kfp/Development/fricas/src/input
top_builddir = ../..
abs_top_builddir = /home/kfp/Development/fricas
datadir = ${datarootdir}


AR = ar
CC = gcc
CFLAGS = -g -O2
OBJEXT = o
EXEEXT = 

AUTOCONF = autoconf
AWK = mawk
TARGET_AWK = /usr/bin/mawk
INSTALL = /usr/bin/install -c
install_sh = @install_sh@
install_sh_DATA = $(install_sh) -c -m 644
install_sh_PROGRAM = $(install_sh) -c
install_sh_script = $(install_sh) -c
INSTALL_DATA = ${INSTALL} -m 644
INSTALL_PROGRAM = ${INSTALL}
INSTALL_SCRIPT = ${INSTALL}
## FIXME:  The test done with Autoconf-2.60 and later concludes
##         that "ln -s" is unusable on msys, and therefore defaults to
##         "cp -p", but that default is unusable for us.  For our
##         purpose "ln -s" is just fine on that platform.  Consequently
##         we are explicitly overrding that value here.
LN_S = ln -s
mkinstalldirs = $(top_srcdir)/config/mkinstalldirs
PATCH = @PATCH@
RANLIB = ranlib
TAR = tar
TOUCH = touch

# The list of make targets made recursively, by walking sub-directories
# Normally, this is a template generated by Automake, but we don't
# use Automake yet; so, we must do it the hard way.
# See the corresponding rules in setup-dep.mk
RECURSIVE_TARGETS = all-recursive check-recursive dvi-recursive \
		html-recursive info-recursive install-data-recursive \
		install-exec-recursive install-info-recursive \
		install-recursive installcheck-recursive \
		installdirs-recursive pdf-recursive ps-recursive \
		uninstall-info-recursive uninstall-recursive


## Normally, Automake will substitute the value for this variable.
## But, we don't have Automake yet.  So we punt on it.
MKDIR_P = mkdir -p

STAMP = echo timestamp >

## ---------------------
## -- Axiom variables --
## ---------------------

## Absolute path to the toplevel source directory for Axiom.  This is
## almost like Autoconf-standard abs_top_srcdir except that, it retains
## the same syntactic values in subdirectories.

## Where The Axiom distribution main source files are kept.
## Notice, this is the src/ directory within the toplevel source
## directory

fricas_top_srcdir = /home/kfp/Development/fricas

fricas_src_srcdir = $(fricas_top_srcdir)/src
fricas_src_datadir = $(fricas_src_srcdir)/share
fricas_src_algdir = $(fricas_src_srcdir)/algebra

## Where tools for the build machine are built
fricas_builddir = /home/kfp/Development/fricas/build/x86_64-unknown-linux
fricas_build_bindir = /home/kfp/Development/fricas/build/x86_64-unknown-linux/bin
fricas_build_libdir = $(fricas_builddir)/lib
fricas_build_mandir = $(fricas_builddir)/man

fricas_configdir = $(abs_top_builddir)/config
fricas_c_macros = $(fricas_configdir)/fricas_c_macros.h

LATEX = /usr/bin/latex

## Staging directory for the target DESTDIR
fricas_targetdir = /home/kfp/Development/fricas/target/x86_64-unknown-linux
fricas_target_bindir = $(fricas_targetdir)/bin
fricas_target_libdir = $(fricas_targetdir)/lib
fricas_target_srcdir = $(fricas_targetdir)/src
fricas_target_docdir = $(fricas_targetdir)/doc
fricas_target_datadir = $(fricas_targetdir)/share
fricas_target_texdir = $(fricas_target_datadir)/texmf/tex


FRICAS_X11_CFLAGS = 
FRICAS_X11_LDFLAGS =  -lXpm  -lX11 

fricas_includes = -I$(fricas_src_srcdir)/include -I$(fricas_configdir)

fricas_build_helper = $(abs_top_srcdir)/src/scripts/build_helper

## Where the staging build directory is found
AXIOM = /home/kfp/Development/fricas/target/x86_64-unknown-linux
export AXIOM
BASE = 
export BASE

TMP=$(fricas_builddir)

## Old Axiom ENV variables

VERSION = FriCAS 2014-12-18

CCF=-O2 -Wall -D_GNU_SOURCE
LDF=-g

## -------------------------------------------
## -- Files generated for the build machine --
## -------------------------------------------
unpack_file = $(fricas_src_srcdir)/scripts/unpack_file

FRICAS_LISP = /usr/local/bin/sbcl
# Extension of the output file name returned by compile-file
LISPOBJEXT = fasl
FASLEXT = fasl


##

##
AXIOMXLROOT=${AXIOM}/compiler

## GCL command to end a session.
BYE=quit

## Clear suffix-based implicit rule table.
.SUFFIXES:

PREGENERATED=
PACKAGE_VERSION = 2014-12-18
PACKAGE_TARNAME = fricas

subdir = src/input/

IN=$(fricas_src_srcdir)/input
OUT=$(fricas_targetdir)/input
DOC=$(fricas_target_docdir)/src/input


FILES= ${OUT}/algaggr.input  ${OUT}/algbrbf.input    ${OUT}/algfacob.input \
       ${OUT}/allfact.input    ${OUT}/antoine.input  \
       ${OUT}/arrows.input \
       ${OUT}/assign.input   ${OUT}/atansqrt.input   ${OUT}/axiom.input \
       ${OUT}/bags.input     \
       ${OUT}/bernpoly.input \
       ${OUT}/bouquet.input  ${OUT}/bug6357.input \
       ${OUT}/cardinal.input \
       ${OUT}/cdraw.input      \
       ${OUT}/ch.input       ${OUT}/clifford.input   \
       ${OUT}/coercels.input ${OUT}/collect.input    ${OUT}/color.input \
       ${OUT}/conformal.input \
       ${OUT}/constant.input \
       ${OUT}/contfrac.input ${OUT}/coordsys.input \
       ${OUT}/cycles.input   \
       ${OUT}/cyfactor.input ${OUT}/damped.input \
       ${OUT}/danzwill.input ${OUT}/defs.input \
       ${OUT}/defintef.input \
       ${OUT}/de2re.input \
       ${OUT}/dhtri.input    ${OUT}/dirichlet.input \
       ${OUT}/discrgrp.input ${OUT}/distro.input \
       ${OUT}/divisor.input  ${OUT}/dpol.input       ${OUT}/draw2dSF.input \
       ${OUT}/drawalg.input  ${OUT}/drawcfn.input \
       ${OUT}/drawcfun.input ${OUT}/drawcurv.input \
       ${OUT}/draw.input     ${OUT}/drawcx.input     ${OUT}/drawex.input \
       ${OUT}/drawpoly.input ${OUT}/drawx.input    \
       ${OUT}/efi.input      \
       ${OUT}/eigen.input \
       ${OUT}/elemfun.input  ${OUT}/elemnum.input    ${OUT}/elfuts.input \
       ${OUT}/elt.input \
       ${OUT}/equation.input \
       ${OUT}/errortrap.input \
       ${OUT}/eval.input     ${OUT}/expexpan.input \
       ${OUT}/explot2d.input   \
       ${OUT}/expps.input    ${OUT}/exprpoly.input \
       ${OUT}/ffdemo.input \
       ${OUT}/fferr.input    ${OUT}/ffx72.input \
       ${OUT}/fib.input      ${OUT}/fixed.input \
       ${OUT}/float2.input \
       ${OUT}/float.input    ${OUT}/fname.input \
       ${OUT}/fnla.input     \
       ${OUT}/fparfrac.input \
       ${OUT}/fr.input       \
       ${OUT}/genups.input   \
       ${OUT}/gonshor.input  ${OUT}/grdef.input    \
       ${OUT}/heat.input     \
       ${OUT}/huang.input \
       ${OUT}/ico.input      ${OUT}/ideal.input      ${OUT}/ifact.input \
       ${OUT}/images1.input  \
       ${OUT}/images3.input  ${OUT}/images6.input    \
       ${OUT}/images7.input  ${OUT}/infprod.input    \
       ${OUT}/intaf.input    ${OUT}/intdeq.input     ${OUT}/intef.input \
       ${OUT}/intg0.input    \
       ${OUT}/intmix.input     ${OUT}/intrf.input \
       ${OUT}/ipftest.input  ${OUT}/is.input         ${OUT}/isprime.input \
       ${OUT}/knot.input \
       ${OUT}/kuipers.input    \
       ${OUT}/laplace.input  ${OUT}/leg.input        \
       ${OUT}/lindep.input   \
       ${OUT}/lode.input       ${OUT}/lodesys.input \
       ${OUT}/lodof.input \
       ${OUT}/lodo.input     \
       ${OUT}/lupfact.input  \
       ${OUT}/macbug.input \
       ${OUT}/macros.input   ${OUT}/mantepse.input   ${OUT}/marcbench.input  \
       ${OUT}/mapleok.input  ${OUT}/matbug.input \
       ${OUT}/matrix22.input ${OUT}/matrix.input     \
       ${OUT}/mfinfact.input ${OUT}/mountain.input \
       ${OUT}/mset.input       \
       ${OUT}/multfact.input ${OUT}/multKnot.input   ${OUT}/mult3d.input \
       ${OUT}/multiple.input \
       ${OUT}/negfloats.input \
       ${OUT}/newton.input \
       ${OUT}/nlode.input    ${OUT}/noonburg.input \
       ${OUT}/ntube.input    ${OUT}/ode.input \
       ${OUT}/octonion.input \
       ${OUT}/operator.input \
       ${OUT}/padic.input    ${OUT}/palette.input \
       ${OUT}/parpcurv.input ${OUT}/parscurv.input   ${OUT}/parsurf.input \
       ${OUT}/pascal1.input \
       ${OUT}/pascal.input   ${OUT}/patmatch.input   \
       ${OUT}/perm.input     ${OUT}/pfr.input        \
       ${OUT}/plotfile.input \
       ${OUT}/pmint.input    ${OUT}/polycoer.input \
       ${OUT}/psgenfcn.input   \
       ${OUT}/ribbon.input   \
       ${OUT}/ribbons.input  ${OUT}/rk4draw.input  \
       ${OUT}/r20abugs.input \
       ${OUT}/r20bugs.input  ${OUT}/r21bugsbig.input \
       ${OUT}/r21bugs.input \
       ${OUT}/radff.input   \
       ${OUT}/reclos.input   \
       ${OUT}/robidoux.input ${OUT}/roots.input \
       ${OUT}/ruleset.input  ${OUT}/rules.input \
       ${OUT}/scherk.input   ${OUT}/scope.input \
       ${OUT}/series2.input \
       ${OUT}/series.input   \
       ${OUT}/skew.input     \
       ${OUT}/solvetra.input   ${OUT}/space3.input \
       ${OUT}/stream2.input  ${OUT}/streams.input \
       ${OUT}/synonym.input  ${OUT}/t111293.input \
       ${OUT}/tanatan.input    ${OUT}/tensor.input   ${OUT}/test.input \
       ${OUT}/tetra.input    ${OUT}/tknot.input \
       ${OUT}/tree.input \
       ${OUT}/triglim.input  ${OUT}/tsetcatbutcher.input \
       ${OUT}/tsetcatchemical.input ${OUT}/tsetcatvermeer.input \
       ${OUT}/tutchap1.input ${OUT}/tutchap2.input   ${OUT}/tutchap3.input \
       ${OUT}/tutchap4.input ${OUT}/tutchap67.input  \
       ${OUT}/unittest.input  ${OUT}/vectors.input  ${OUT}/viewdef.input \
       ${OUT}/zimmer.input

FILES2=${OUT}/arith.input     \
       ${OUT}/calculus2.input \
       ${OUT}/equation2.input \
       ${OUT}/exint.input      ${OUT}/exlap.input \
       ${OUT}/expr.input     \
       ${OUT}/exsum.input    ${OUT}/fns.input        \
       ${OUT}/function.input ${OUT}/galois.input     \
       ${OUT}/grpthry.input \
       ${OUT}/knot2.input      ${OUT}/linalg.input \
       ${OUT}/loop.input \
       ${OUT}/numbers.input \
       ${OUT}/parabola.input ${OUT}/pat.input        \
       ${OUT}/poly.input     ${OUT}/reductio.input   ${OUT}/repa6.input

.PHONY: all all-ax all-input

all: all-ax

check: regress

all-ax all-input: ${FILES} ${FILES2} regress outs
	@echo 1 finished $(srcdir)

${FILES} ${FILES2} : ${OUT}/%.input: $(srcdir)/%.input
	@ echo generic 10 making ${OUT}/$*.input from $*.input
	cp $< ${OUT}/$*.input

%.spad: ${IN}/%.spad
	cp $< $@

${OUT}/%.as: %.as
	@echo generic 12 making ${OUT}/$*.as from $*.as
	cp $*.as ${OUT}/$*.as

use:
	@echo 2 making ${OUT} from ${IN}

bugs2008.output: bugs2008-ExportType.spad

regress: regression-tests

bug:
	@echo 4 making ${OUT} from ${IN}

document:
	@echo 5 documenting ${OUT}

mostlyclean-local:
	-rm -f *.output
	-rm -rf *.NRLIB
	-rm -rf $(OUT)

clean-local: mostlyclean-local

distclean-local: clean-local


.SUFFIXES:
.SUFFIXES: .input .output

TESTSYS=$(fricas_target_bindir)/AXIOMsys

SKIP= antoine.output \
      atansqrt.output  bernpoly.output  bouquet.output   \
      cdraw.output     color.output     \
      conformal.output coordsys.output  \
      damped.output    \
      de2re.output     defs.output      \
      draw2dSF.output  drawalg.output   drawcfn.output   drawcfun.output  \
      drawcurv.output  drawcx.output    drawex.output    draw.output      \
      drawpoly.output  drawx.output     dropt.output     \
      explot2d.output  explot3d.output  \
      grdef.output     \
      images1.output   images2.output   \
      images3.output   images5.output   \
      images6.output   images7.output   \
      images8.output   knot.output      \
      matrox.output    \
      mountain.output  mult2d.output    mult3d.output    multKnot.output  \
      ntube.output     palette.output   parpcurv.output  parscurv.output  \
      parsurf.output   plotfile.output  \
      plotlist.output  ribbon.output    \
      ribbons.output   rk4draw.output  \
      tetra.output     tknot.output     \
      vectors.output   wester.output

OUTS= algaggr.output   algbrbf.output   algfacob.output  \
      allfact.output   arith.output     \
      arrows.output    \
      assign.output    bags.output      \
      bug6357.output   \
      calculus2.output cardinal.output  \
      ch.output        clifford.output  coercels.output  \
      collect.output   constant.output  contfrac.output  \
      cycles.output    \
      cyfactor.output  \
      danzwill.output  defintef.output  \
      dhtri.output     \
      divisor.output   \
      dpol.output      \
      efi.output       eigen.output     elemfun.output   \
      elemnum.output   elfuts.output    \
      elt.output       \
      equation2.output equation.output  errortrap.output \
      eval.output      exlap.output     \
      exint.output     \
      expexpan.output  \
      exprpoly.output  \
      exsum.output     ffdemo.output    fferr.output     \
      ffx72.output     fib.output       \
      fixed.output \
      float2.output    float.output     \
      fname.output     fnla.output      fns.output       \
      fparfrac.output  \
      fr.output        function.output  \
      galois.output    genups.output    \
      gonshor.output   \
      grpthry.output   heat.output      \
      huang.output     \
      i_bugs.output \
      ico.output       ideal.output     ifact.output     \
      infprod.output    \
      intaf.output     intef.output     intdeq.output    \
      intg0.output     intheory.output  \
      intmix.output    intrf.output     ipftest.output   \
      is.output        \
      jet.output       knot2.output     \
      kuipers.output   laplace.output   \
      leg.output       \
      linalg.output    lindep.output    \
      lodesys.output   \
      lodo.output      lodo2.output     \
      loop.output      \
      lupfact.output   macbug.output    macros.output    \
      mapleok.output   \
      marcbench.output matbug.output    \
      matrix22.output  matrix.output    \
      mfinfact.output  \
      mset.output      \
      multfact.output  multiple.output  negfloats.output \
      newton.output    nlode.output     \
      noonburg.output  \
      numbers.output   ode.output       \
      octonion.output  \
      operator.output  \
      padic.output     parabola.output  \
      pascal1.output   pascal.output    \
      pat.output       patmatch.output  perm.output      \
      pfr.output       pmint.output     \
      poly.output      polycoer.output  \
      psgenfcn.output  \
      radff.output     reclos.output    reductio.output \
      repa6.output     \
      robidoux.output  \
      roots.output     ruleset.output   rules.output     \
      r20abugs.output  r20bugs.output   r21bugsbig.output r21bugs.output  \
      scherk.output    \
      scope.output     \
      series2.output   series.output    \
      skew.output      solvetra.output  \
      space3.output    \
      streams.output   stream2.output   \
      synonym.output   t111293.output   tanatan.output   \
      test.output      triglim.output   \
      tsetcatbutcher.output tsetcatchemical.output tsetcatvermeer.output  \
      tree.output      \
      tutchap1.output  tutchap2.output  tutchap3.output  tutchap4.output  \
      tutchap67.output \
      unittest.output \
      view2d.output    viewdef.output   \
      zimmer.output

REGRESS = agcd.output array.output bugs2007.output \
      bugs2008.output  bugs2009.output  bugs2010.output \
      bugs2011.output  bugs2012.output  bugs2013.output  bugs2014.output \
      bugs2015.output \
      cyldec.output dirichlet.output discrgrp.output distro.output \
      ellip.output expps.output finite.output fun.output \
      integ.output isprime.output limit.output \
      lode.output lodof.output lodof2.output \
      mantepse.output matcat.output mts.output ord.output \
      pgcd.output polylift.output series3.output ssolve.output \
      table.output tensor.output vsbasis.output

READINS = conformal.input

${READINS}: %.input : $(srcdir)/%.input
	cp $< $@

fixed.output: conformal.input

.PHONY: regression-tests
regression-tests: ${REGRESS}

outs : ${OUTS}

${OUTS} ${REGRESS} : %.output: $(srcdir)/%.input
	( \
	echo running test file $* ; \
	echo ')set message test on' > tmp$$$$.input; \
	echo ')set message auto off' >> tmp$$$$.input ; \
	echo 'systemCommand "read $<"' >> tmp$$$$.input ; \
	echo ')lisp (quit)' >> tmp$$$$.input ; \
	echo ')read "tmp'$$$$'.input"' | ${TESTSYS} | tee $*.output; \
	rm tmp$$$$.input )
## ---------------------------------------
## -- Standard boilerplate dependencies --
## ---------------------------------------

# Recursive rules, usually automatically generated by Automake.
# Since we do not use (yet) Automake, we mimic the behaviour as
# close as possible.
# Recursive wall of sub-directories is based on the variable
# SUBDIRS.  That variable usually contains the of sub-directories
# to be made in depth-first postfix.  However, that order can
# be changed to depth-first prefix by explicitly including "."
# in SUBDIRS.  Rules ending with '-ax' are those specific to the
# the current directory.  Notice that the '-ax' rules are similar
# to Automake generated '-am'.
.PHONY: $(RECURSIVE_TARGETS)
$(RECURSIVE_TARGETS):
	failcmd='exit 1'; \
	for f in $$MAKEFLAGS; do \
	   case $$f in \
	      *=* | --[!k]*) ;; \
	      *k*) failcmd='fail=yes';; \
	   esac; \
	done; \
	dot_seen=no; \
	target=`echo $@ | sed s/-recursive//`; list='$(SUBDIRS)'; \
	for subdir in $$list; do \
	   echo "Making $$target in $$subdir"; \
	   if test "$$subdir" = "."; then \
	      dot_seen=yes; \
	      local_target="$$target-ax"; \
	   else \
	      local_target="$$target"; \
	   fi; \
	   (cd $$subdir && $(MAKE) $$local_target) || eval $$failcmd; \
	done; \
	if test "$$dot_seen" = "no"; then \
	   $(MAKE) "$$target-ax" || exit 1; \
	fi; test -z "$$fail"

# Recursive cleanup is done in reverse, postfix order of ordinary build.
.PHONY: mostlyclean-recursive
.PHONY: clean-recursive
.PHONY: distclean-recursive
.PHONY: maintainer-clean-recursive
mostlyclean-recursive clean-recursive distclean-recursive \
maintainer-clean-recursive:
	@failcmd='exit 1'; \
	for f in $$MAKEFLAGS; do \
	   case $$f in \
	      *=* | --[!k]*) ;; \
	      *k*) failcmd='fail=yes';; \
	   esac; \
	done; \
	dot_seen=no; \
	list='$(SUBDIRS)' ; \
	rev=''; \
	for subdir in $$list; do \
	   if test "$$subdir" != "."; then \
	      rev="$$subdir $$rev"; \
	   fi; \
	done; \
	rev="$$rev ."; \
	target=`echo $@ | sed s/-recursive//`; \
	for subdir in $$rev; do \
	   echo "Making $$target in $$subdir"; \
	   if test "$$subdir" = "."; then \
	      local_target="$$target-ax"; \
	   else \
	      local_target="$$target"; \
	   fi; \
	   (cd $$subdir && $(MAKE) $$local_target) || eval $$failcmd; \
	done && test -z "$$fail"

## Rules to make DVI files from pamphlets

.PRECIOUS: %.tex
.PRECIOUS: %.dvi

.PHONY: dvi
dvi: dvi-recursive

$(top_srcdir)/configure: $(top_srcdir)/configure.ac \
			 $(top_srcdir)/config/fricas.m4
	cd $(top_srcdir) && $(AUTOCONF)


.PRECIOUS: Makefile
Makefile: $(srcdir)/Makefile.in $(top_srcdir)/config/var-def.mk \
	  $(top_srcdir)/config/setup-dep.mk \
	  $(abs_top_builddir)/config.status
	cd $(abs_top_builddir) && $(SHELL) ./config.status $(subdir)$@

## Cleanup.
##   Each Makefile is responsible of defining targets named
##   mostlyclean-local, clean-local, and distclean-local.
.PHONY: mostlyclean-generic mostlyclean-local mostlyclean mostlyclean-ax
mostlyclean-generic:
	-rm -f *~
	-rm -f *.log *.aux *.toc

mostlyclean: mostlyclean-recursive
mostlyclean-ax: mostlyclean-generic mostlyclean-local

.PHONY: clean-generic clean-local clean clean-ax
clean-generic: mostlyclean-generic
	-rm -f *.dvi

clean: clean-recursive
clean-ax: clean-generic clean-local

.PHONY: distclean-generic distclean-local distclean distclean-ax
distclean-generic: clean-generic
	-rm -rf $(fricas_target_docdir)/$(subdir)

distclean: distclean-recursive
	-rm Makefile

distclean-ax: distclean-generic distclean-local
